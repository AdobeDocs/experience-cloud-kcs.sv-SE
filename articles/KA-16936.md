---
title: "AEM omdirigerar användaren tillbaka till http när den nås via SSL/TLS-avslutad belastningsutjämnare | AEM"
description: Beskrivning
solution: Experience Manager
product: Experience Manager
applies-to: "Experience Manager"
keywords: "KCS"
resolution: Resolution
internal-notes: "Helpx Link: https://helpx.adobe.com/experience-manager/kb/AEM-redirecting-back-to-http-on-accessed-via-SSL-terminated-Load-Balancer.html"
bug: false
article-created-by: Emily Geary
article-created-date: "4/12/2021 6:21:34 PM"
article-published-by: Emily Geary
article-published-date: "4/12/2021 6:26:15 PM"
version-number: 1
article-number: KA-16936
dynamics-url: "https://adobe-ent.crm.dynamics.com/main.aspx?forceUCI=1&pagetype=entityrecord&etn=knowledgearticle&id=684ec8e8-bb9b-eb11-b1ac-000d3a3680d8"
exl-id: 52e50c09-67f2-46a2-90a7-df769d76a0dd
source-git-commit: 0c3e421beca46d9fe1952b1f98538a50697216a0
workflow-type: tm+mt
source-wordcount: '341'
ht-degree: 0%

---

# AEM dirigerar om användaren tillbaka till http när den nås via SSL/TLS-avslutad belastningsutjämnare | AEM

## Beskrivning


När du får åtkomst till AEM via en SSL-avbruten belastningsutjämnare (eller SSL avslutade CDN) omdirigeras AEM tillbaka från https till http.

SSL-avslutning vid belastningsutjämnaren innebär att SSL-certifikaten är installerade i belastningsutjämnaren. Slutanvändaren når webbplatsen via `https://`och Dispatcher/webbservern och AEM finns på baksidan med `http://`.



<b>Orsak</b>

Olika belastningsutjämnare skickar olika huvuden för att meddela back end-systemen att SSL avslutas uppströms. Till exempel: [Amazon ELB använder rubriken &quot;X-Forwarded-Proto: https&quot;](https://docs.aws.amazon.com/elasticloadbalancing/latest/classic/x-forwarded-headers.html#x-forwarded-proto).


## Upplösning


Så här åtgärdar du problemet:

<b>Jag. Uppdatera Dispatcher `/clientheaders` konfiguration</b>

Läs dokumentationen till belastningsutjämnaren för att ta reda på vilket huvud som anges för att meddela underordnade system att den har avslutat SSL. För enkelhetens skull antar vi att rätt HTTP-rubrik är *`X-Forwarded-Proto: https`*

1. Logga in på dispatcherservern.
2. Öppna dispatcherservergruppen `.any` konfiguration.
3. Lägg till rubriken i `/clientheaders` -avsnitt.


Om du använder dispatcher utan belastningsutjämnare eller om belastningsutjämnaren eller proxyn inte kan ange `X-Forwarded-Proto` kan du ange det på webbservern eller avsändaren. Om du använder [!DNL Apache HTTP Server]uppdaterar sedan din HTTPS VirtualHost med det här direktivet:


| 1 | `RequestHeader ` `set` `X-Forwarded-Proto ` `"https"` |
| --- | --- |


<b>II. Uppdatera rubrikkonfigurationerna:</b>

1. Gå till *http://host:port*/system/console/configMgr/org.apache.felix.http.sslfilter.SslFilter och logga in som administratör.
2. Ange SSL-framåtrubrik till `X-Forwarded-Proto`.
3. Ange värdet för SL-framåtriktad till https.
4. Klicka på Spara.


Obs!

Det finns ingen standard för omvända proxyrubriker som anger vilket protokoll som ska användas för baksidan. Här är några kända:

- Amazon ELB ([!DNL Elastic Load Balancer]) använder `X-Forwarded-Proto: https` header.
- [!DNL Amazon Cloudfront] CDN-användare `X-Cloudfront-Proto: https` header.


<b>III. Uppdatera konfigurationen för Jetty OSGi (AEM 6.3 och senare)</b>

I AEM 6.3 och senare krävs en extra konfiguration:

- Logga in på http://aem-host:port/system/console/configMgr/org.apache.felix.http.
- Aktivera inställningen <b>Aktivera proxy-/belastningsutjämningsanslutning</b>och spara det.
