---
title: "Vilka förfrågningar AEM Dispatcher cache?"
description: Beskrivning
solution: Experience Manager
product: Experience Manager
applies-to: "Experience Manager"
keywords: "KCS, AEM dispatcher, cache, AEM, HTTP-begäran"
resolution: Resolution
internal-notes: null
bug: false
article-created-by: Nayanika Chakravarty
article-created-date: "6/13/2023 4:27:06 PM"
article-published-by: Nayanika Chakravarty
article-published-date: "6/16/2023 7:11:27 PM"
version-number: 7
article-number: KA-17497
dynamics-url: "https://adobe-ent.crm.dynamics.com/main.aspx?forceUCI=1&pagetype=entityrecord&etn=knowledgearticle&id=4569ff21-070a-ee11-8f6e-6045bd006e5a"
source-git-commit: ac5c44c2539b0f53c599f1540ca116a0030e687c
workflow-type: tm+mt
source-wordcount: '420'
ht-degree: 3%

---

# Vilka förfrågningar AEM Dispatcher cache?

## Beskrivning {#description}


<b>Miljö</b>

AEM Dispatcher 4.3.3

<b>Problem</b>

Den här artikeln avgör varför och vilka HTTP-begäranden/svar som inte cachas av AEM Dispatcher.


## Upplösning {#resolution}


Dokumentationen innehåller de viktigaste scenarierna som påverkar cachemöjligheterna för begäranden och svar som går igenom AEM Dispatcher-modulen. Alla cacheregler täcks inte.

<b>Regler för HTTP-begäran och -cachelagring</b>

För att en HTTP-begäran ska kunna nås av avsändaren måste den följa följande regler:

1. URL är absolut (fungerar inte med . eller ..) har ett filtillägg och filnamnet i URL:en fungerar som en fil i filsystemet.

   <u>Relaterade loggmeddelanden</u>:


   ```
   URI not canonical: %s.
   
   Unable to map URI to file: %s.
   
   cache file path too long
   
   temporary file path too long
   
   request URL has no extension
   ```



   <u>Exempel</u>:


   | `/content/test` | `not cached` |
   | --- | --- |
   | `/content/test.html` | `cached` |


2. Det har inga snedstreck efter det första filtillägget.

   <u>Relaterade loggmeddelanden</u>:


   ```
   request URL has trailing slash
   ```



   <u>Exempel</u>:


   | `/content/test.html/` | `not cached` |
   | --- | --- |
   | `/content/test.html/foo.jpg` | `not cached` |
   | `/content/test.html` | `cached` |


3. Den använder HTTP-GET eller HEAD.

   <u>Relaterade loggmeddelanden</u>:


   ```
   request method is neither GET nor HEAD
   ```



   <u>Exempel</u>:


   | `HEAD /content/test.html HTTP/1.1` | `cached` |
   | --- | --- |
   | `GET /content/dam/test.jpg HTTP/1.1` | `not cached` |
   | `POST /content/test.html HTTP/1.1` | `not cached` |


4. Begäran nekas av /CACHE =`>`  /REGLER definierade i dispatchern. EVENTUELL GRUPPKONFIGURATION.

   <u>Relaterade loggmeddelanden</u>:


   ```
   URI not  in cache rules: %s request URL not in cache rules
   ```



   <u>Exempel</u>:


   a. Inte cachelagrad


   ```
   Farm has /cache =`>`  /rules and a request is received for /content/test.html
   /cache
   {
     ...
     /rules
     {
       /0001 {
         type "deny"
         glob "*"
         }
     }
   }
   ```



   b. Cachelagrad


   ```
   Farm has /cache =`>`  /rules and a request is received for /content/test.html
   /cache
   {
     ...
     /rules
     {
       /0001 {
         type "allow"
         glob "*"
         }
     }
   }
   ```


5. HTTP-begäran innehåller inte någon auktoriseringshuvud eller så innehåller den rubriken, men /ALLOWAUTHZED är inställd på 1 i FARM CONFIGURATION.

   <u>Relaterade loggmeddelanden</u>:


   ```
   request contains authorization
   ```



   <u>Exempel</u>:


   a. Inte cachelagrad


   ```
   HTTP Request:
   
   GET /content/test.html HTTP/1.1
   Authorization: Basic YWxhZGRpbjpvcGVuc2VzYW1l
   dispatcher.any farm /cache =`>`  /allowAuthorized configuration:
   /cache {
    /allowAuthorized “0”
   }
   ```



   b. Cachelagrad


   ```
   HTTP Request:
   
   GET /content/test.html HTTP/1.1
   Authorization: Basic YWxhZGRpbjpvcGVuc2VzYW1l
   dispatcher.any farm /cache =`>`  /allowAuthorized configuration:
   /cache {
    /allowAuthorized “1”
   }
   ```


6. HTTP-begäran innehåller inloggnings-token eller auktoriserings-cookie i cookie-huvudet, eller så innehåller den antingen (eller båda) av dessa cookies och /ALLOWAUTHZED är inställd på 1 i FARM CONFIGURATION.

   <u>Relaterade loggmeddelanden</u>:


   ```
   request contains authorization
   ```



   <u>Exempel</u>:


   a. Inte cachelagrad


   ```
   HTTP Request:
   
   GET /content/test.html HTTP/1.1
   Cookie: login-token=...
   dispatcher.any farm /cache = /allowAuthorized configuration:
   /cache {
    /allowAuthorized “0”
   }
   ```






   ```
   HTTP Request:
   
   GET /content/test.html HTTP/1.1
   Cookie: authorization= YWxhZGRpbjpvcGVuc2VzYW1l
   dispatcher.any farm /cache = /allowAuthorized configuration:
   /cache {
    /allowAuthorized “0”
   }
   ```



   b. Cachelagrad


   ```
   HTTP Request:
   
   GET /content/test.html HTTP/1.1
   Cookie: login-token=...
   dispatcher.any farm /cache =`>`  /allowAuthorized configuration:
   /cache {
    /allowAuthorized “1”
   }
   ```


7. Det finns en QUERYSTRING-parameter i URL:en och parametern kan ignoreras via FARM:S /IGNOREURLPARAMS CONFIGURATION.

   <u>Relaterade loggmeddelanden</u>:


   ```
   request contains a query string
   ```



   <u>Exempel</u>:


   a. Cachelagrad


   ```
   HTTP Request:
   
   GET /content/test.html?test=1 HTTP/1.1
   Farm /cache configuration:
   
   /ignoreUrlParams { /0001 { /type “allow” /glob “*” }
   }
   ```






   ```
   HTTP Request:
   
   GET /content/test.html?test=1 HTTP/1.1
   Farm /cache configuration:
   /ignoreUrlParams { /0001 { /type “deny” /glob “*” } 
      /0001 { /type “allow” /glob “test” }
   }
   ```



   b. Inte cachelagrad


   ```
   HTTP Request:
   
   GET /content/test.html?test=1 HTTP/1.1
   dispatcher.any farm /cache = /allowAuthorized configuration:
   /ignoreUrlParams {/0001 { /type “deny” /glob “*” } 
     /0001 { /type “allow” /glob “q” }
   }
   ```




<b>HTTP-svar och cachningsregler:</b>

HTTP-svaret som returneras från AEM kan nås om följande villkor uppfylls:

1. Avsändaren kan skicka och ta emot 200 OK-svar från en av de definierade RENDERS-alternativen.

   <b>Obs!</b> Om nej [/timeout](https://experienceleague.adobe.com/docs/experience-manager-dispatcher/using/configuring/dispatcher-configuration.html?lang=en) är inställt på /renders eller är inställt på 0, så väntar det för alltid på en anslutning till AEM även om instansen är nere.


   <u>Relaterade loggmeddelanden</u>:


   ```
   Unable to send request to remote server. Unable to receive response from remote server. Remote server returned: %s No backend available.
   ```



   <u>Exempel</u>:


   | HTTP-begäran:<br><br>    200 OK | cachelagrad |
   | --- | --- |
   | HTTP-begäran:<br><br>    404 Sidan hittades inte | inte cachelagrad |


2. Inga av dessa svarshuvuden finns med i svaret:

   - `Dispatcher: no-cache`
   - `Cache-control: no-cache`
   - `Pragma: no-cache`



   <u>Relaterade loggmeddelanden</u>:


   ```
   Backend forbids caching: %s, sent: %s" response contains no_cache
   ```



   <u>Exempel</u>:


   | HTTP-svar:<br><br>    200 OK<br><br>    Dispatcher: no-cache | inte cachelagrad |
   | --- | --- |
   | HTTP-svar:<br><br>    200 OK<br><br>    Cache-control: no-cache | inte cachelagrad |
   | HTTP-svar:<br><br>    200 OK<br><br>    Pragma: no-cache | inte cachelagrad |
   | HTTP-svar:<br><br>    200 OK | cachelagrad |


3. Värdet för innehållslängd är större än ZERO BYTES.
   <u>Relaterade loggmeddelanden</u>:


   ```
   response content length is zero
   ```



   <u>Exempel</u>:


   | HTTP-svar:<br><br>    200 OK<br><br>    Content-Length: 0 | inte cachelagrad |
   | --- | --- |
   | HTTP-svar:<br><br>    200 OK<br><br>    Content-Length: 3120 | cachelagrad |



