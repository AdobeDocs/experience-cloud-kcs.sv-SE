---
title: "Hur blockerar jag IP-adresser på Apache HTTP Server-nivå?"
description: Beskrivning
solution: Experience Manager
product: Experience Manager
applies-to: "Experience Manager"
keywords: "KCS, blockera IP-adresser, Apache HTTP-server, AEM dispatcher"
resolution: Resolution
internal-notes: null
bug: false
article-created-by: Nayanika Chakravarty
article-created-date: "5/24/2023 3:30:14 PM"
article-published-by: Nayanika Chakravarty
article-published-date: "5/24/2023 3:38:10 PM"
version-number: 6
article-number: KA-17455
dynamics-url: "https://adobe-ent.crm.dynamics.com/main.aspx?forceUCI=1&pagetype=entityrecord&etn=knowledgearticle&id=2365b1db-47fa-ed11-8849-6045bd006b3d"
source-git-commit: 1e84ba49e6ca4ddca5e5058ce62804df6d2835d5
workflow-type: tm+mt
source-wordcount: '247'
ht-degree: 1%

---

# Hur blockerar jag IP-adresser på Apache HTTP Server-nivå?

## Beskrivning {#description}

<b>Miljö</b>
Adobe Experience Manager


<b>Problem/symtom</b>
Vår sajt utsätts för en denial of service-attack, skräppost eller blir hackad. Hur blockerar jag IP-adresser på Apache HTTP Server-nivå (AEM Dispatcher)?


## Upplösning {#resolution}


De flesta Brandväggar för webbprogram (WAF), till exempel lägessäkerhet, kan blockeringslista av IP-adresser. Om du kör Apache HTTP Server och vill blockera IP-adresser omedelbart följer du dessa steg (*inte tillämpligt på AEM as a Cloud Service<b>*)</b>:

1. Skapa en fil med namnet `block-offending-ips.conf` på servern
2. Öppna filen i en redigerare och lägg till ett platsdirektiv som blockerar alla felaktiga IP-adresser från att komma åt de URL:er du vill blockera. Det finns två alternativ för innehållet i filen nedan:<br>    S. Om begäran är proxibel (via CDN, belastningsutjämnare osv.) och fjärranvändarens IP bara finns i en rubrik som X-Forwarded-For kan den här konfigurationen användas. Observera att den här konfigurationen inte gäller om remoteip_module är konfigurerad.


   ```
   LocationMatch "/.*"
       Order Allow,Deny
       Allow from all
       SetEnvif X-Forwarded-For "10\.42\.137\.123" DenyAccess
       SetEnvif X-Forwarded-For "122\.6\.218\.101" DenyAccess
       #Repeat the "SetEnvlf X-Forwarded-For ..." for each IP you want to block
       Deny from env=DenyAccess
       /LocationMatch
   ```

   B. Om fjärranvändaren har direktåtkomst till Apache eller om du använder remoteip_module (se <b>`[` 1`]` </b> nedan) för att extrahera och ställa in den i Apache, kan du använda mod_authz_core <b>Kräv</b> direkt (Apache 2.4).


   ```
   LocationMatch "/.*"
       RequireAll
       Require all granted
       Require not ip 10.42.137.123
       Require not ip 122.6.218.101
       #Repeat the "Require not ip ..." for each IP you want to block
       /RequireAll
       /LocationMatch
   ```


   <b>`[` 1`]`  remoteip_module</b>


   ```
   # Extract true client IP from header added by load balancer/CDN
       IfModule remotetip module
       # valid for ELB or ELB+CloudFront
       RemoteIPHeader X-Forwarded-For
       IfModule
   ```


3. Släpp filen block-offending-ips.conf i mappen /etc/conf.d på webbservern Apache.
4. Starta om Apache HTTP-servern.

