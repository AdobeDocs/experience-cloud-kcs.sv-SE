---
title: "Så här indexerar du om ett synkront AEM | AEM, eke"
description: Beskrivning
solution: Experience Manager
product: Experience Manager
applies-to: "Experience Manager"
keywords: "KCS"
resolution: Resolution
internal-notes: "Helpx Link: helpx.adobe.com/experience-manager/kb/how-to-reindex-a-synchronous-AEM-index-AEM-Oak.html"
bug: false
article-created-by: Emily Geary
article-created-date: "3/17/2021 9:19:48 PM"
article-published-by: Emily Geary
article-published-date: "3/17/2021 9:21:41 PM"
version-number: 2
article-number: KA-16460
dynamics-url: "https://adobe-ent.crm.dynamics.com/main.aspx?forceUCI=1&pagetype=entityrecord&etn=knowledgearticle&id=3613fb7d-6687-eb11-a812-000d3a593216"
exl-id: 1209609f-84a9-4810-b7c8-1193b09f82d7
source-git-commit: e8f4ca2dd578944d4fe399074fab461de88ad247
workflow-type: tm+mt
source-wordcount: '440'
ht-degree: 0%

---

# Indexera om ett synkront AEM | AEM, ek

## Beskrivning


Hur indexerar jag om ett synkront ekindexvärde utan att orsaka driftavbrott?


## Upplösning


Om du indexerar om ett synkront index genom att helt enkelt ställa in egenskapen reindex på true resulterar det i en synkron åtgärd som kan göra att en Oak-instans låser sig. Om du vill undvika den här situationen skickar du indexering till en bakgrundstråd.  Gör så här:

<b>Steg 1:</b> Indexera om i en bakgrundstråd

1. Ange följande egenskaper från CRXDE Lite i indexdefinitionen för egenskapsindexet som ska aktiveras för asynkron indexering - /oak:index/egenskapsindex

   reindex=true

   reindex-async=true
2. För att verifiera att noden ovan uppdateras bör async=&quot;async-reindex&quot; anges.
3. Anropa startPropertyIndexAsyncReindex för PropertyIndexAsyncReindex MBean. Detta startar bakgrundsjobbet som skulle söka efter sådana typer av index. Efter anrop ser du att en loggrad indexeras om..
4. När omindexeringen är klar återställs indexeringsflaggan till false.
5. Återanropa steg 3 om du vill ändra tillbaka till ett synkroniseringsindex. Om den asynkrona flaggan inte tas bort kan du behöva anropa den flera gånger (detta kan inträffa om det sker ändringar samtidigt som indexet påverkas).



*Obs!* Endast &#39;async=&quot;async-reindex&quot;&#39; kommer att tas bort eftersom den kontroll som indexeringen kommer att utföras på.  Egenskapen reindex-async är bara en konfigurationsflagga som inte ändras automatiskt. Tanken är att du skulle ange den en gång för de specifika indexdefinitionerna som styr all framtida omindexering. Det förväntas sedan stanna där inne och då behöver du inte röra det igen.


<b>Steg 2:</b> Ta bort kontrollpunkten för omindexering (endast AEM 6.2 och tidigare versioner)

Under den asynkrona omindexeringen skapas en databaskontrollpunkt. När indexeringsaktiviteten har slutförts måste den släppas enligt beskrivningen nedan för att säkerställa en jämn Revision-skräpinsamling senare på :

1. Öppna först kontrollpunktshanteraren MBean:

   MongoMK - [/system/console/jmx/org.apache.jackrabbit.oak%3Aname%3Document+node+store+checkpoint+management%2Ctype%3DCheckpointManager](http://localhost:4502/system/console/jmx/org.apache.jackrabbit.oak%3Aname%3DDocument+node+store+checkpoint+management%2Ctype%3DCheckpointManger)

   TARMK - [/system/console/jmx/org.apache.jackrabbit.oak%3Aname%3DSegment+node+store+checkpoint+management%2Ctype%3DCheckpointManger](http://localhost:4502/system/console/jmx/org.apache.jackrabbit.oak%3Aname%3DSegment+node+store+checkpoint+management%2Ctype%3DCheckpointManger)
2. Anropa åtgärden listCheckpoints()
3. Hitta kontrollpunktsraden med egenskapen &quot;name=async-reindex&quot;.
4. Kopiera ID-värdet till Urklipp

   På MongoMK ser det ut ungefär så här: r1234567aaa-0-1

   På tarMK ser det ut ungefär så här: 6eac07d0-fe27-4d16-82f8-6d5da4cefd67
5. Öppna sedan åtgärden releaseCheckpoint().
6. Klistra in det kopierade ID:t som p1 och klicka på Anropa.
7. I det här steget kommer kontrollpunkten att frigöras.
